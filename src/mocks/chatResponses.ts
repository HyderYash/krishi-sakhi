// Simple rule-based chat responses for demo
export const getChatResponse = async (userInput: string, farmer: any): Promise<string> => {
  const input = userInput.toLowerCase();

  // Weather queries
  if (input.includes('‡¥Æ‡¥¥') || input.includes('‡¥ï‡¥æ‡¥≤‡¥æ‡¥µ‡¥∏‡µç‡¥•') || input.includes('‡¥®‡¥æ‡¥≥‡µÜ')) {
    return `‡¥∂‡¥∞‡¥ø ${farmer.name_ml} ‡¥∏‡¥æ‡µº! ‡¥®‡¥æ‡¥≥‡µÜ ${farmer.district} ‡µΩ 80% ‡¥Æ‡¥¥ ‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§‡¥Ø‡µÅ‡¥£‡µç‡¥ü‡µç. ‡¥ú‡¥≤‡¥∏‡µá‡¥ö‡¥®‡¥Ç ‡¥í‡¥¥‡¥ø‡¥µ‡¥æ‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥∂‡µÅ‡¥™‡¥æ‡µº‡¥∂ ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ. ‡¥µ‡¥ø‡¥≥‡¥µ‡µÜ‡¥ü‡µÅ‡¥™‡µç‡¥™‡µç ‡¥Æ‡¥æ‡¥±‡µç‡¥±‡¥ø‡¥µ‡µÜ‡¥ï‡µç‡¥ï‡µÅ‡¥ï.`;
  }

  // Irrigation queries
  if (input.includes('‡¥ú‡¥≤‡¥∏‡µá‡¥ö‡¥®‡¥Ç') || input.includes('‡¥µ‡µÜ‡¥≥‡µç‡¥≥‡¥Ç')) {
    return `${farmer.name_ml} ‡¥∏‡¥æ‡µº, ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ${farmer.soilType} ‡¥Æ‡¥£‡µç‡¥£‡¥ø‡µΩ ${farmer.farmSizeAcres} ‡¥è‡¥ï‡µç‡¥ï‡¥±‡¥ø‡¥®‡µç ‡¥á‡¥®‡µç‡¥®‡µç ‡¥µ‡µà‡¥ï‡µÄ‡¥ü‡µç‡¥ü‡µç ‡¥ú‡¥≤‡¥∏‡µá‡¥ö‡¥®‡¥Ç ‡¥®‡¥ü‡¥§‡µç‡¥§‡¥æ‡¥Ç. ‡¥®‡¥æ‡¥≥‡µÜ ‡¥Æ‡¥¥ ‡¥µ‡¥∞‡¥æ‡µª ‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§‡¥Ø‡µÅ‡¥≥‡µç‡¥≥‡¥§‡¥ø‡¥®‡¥æ‡µΩ ‡¥Ö‡¥ß‡¥ø‡¥ï‡¥Ç ‡¥µ‡µÜ‡¥≥‡µç‡¥≥‡¥Ç ‡¥µ‡µá‡¥£‡µç‡¥ü.`;
  }

  // Market price queries
  if (input.includes('‡¥µ‡¥ø‡¥≤') || input.includes('‡¥Æ‡¥æ‡µº‡¥ï‡µç‡¥ï‡¥±‡µç‡¥±‡µç')) {
    const crops = farmer.mainCrops.join(', ');
    return `‡¥á‡¥®‡µç‡¥®‡¥§‡µç‡¥§‡µÜ ${farmer.district} ‡¥Æ‡¥æ‡µº‡¥ï‡µç‡¥ï‡¥±‡µç‡¥±‡µç ‡¥µ‡¥ø‡¥≤‡¥ï‡µæ: ‡¥®‡µÜ‡µΩ - ‚Çπ2,300/‡¥ï‡µç‡¥µ‡¥ø‡¥®‡µç‡¥±‡µΩ (‚Üë7%), ‡¥¨‡¥®‡¥æ‡¥® - ‚Çπ48/‡¥°‡¥∏‡µª (‚Üë6.7%). ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥µ‡¥ø‡¥≥‡¥ï‡µæ (${crops}) ‡¥®‡¥≤‡µç‡¥≤ ‡¥µ‡¥ø‡¥≤‡¥Ø‡¥ø‡¥≤‡¥æ‡¥£‡µç ‡¥™‡µã‡¥ï‡µÅ‡¥®‡µç‡¥®‡¥§‡µç!`;
  }

  // Disease/pest queries
  if (input.includes('‡¥∞‡µã‡¥ó‡¥Ç') || input.includes('‡¥™‡µÅ‡¥¥‡µÅ') || input.includes('‡¥ï‡µÄ‡¥ü')) {
    return `${farmer.name_ml} ‡¥∏‡¥æ‡µº, ‡¥è‡¥§‡µç ‡¥á‡¥≤‡¥Ø‡¥ø‡µΩ ‡¥™‡µç‡¥∞‡¥∂‡µç‡¥®‡¥Ç ‡¥ï‡¥£‡µç‡¥ü‡µÅ? ‡¥≤‡µÄ‡¥´‡µç ‡¥∏‡µç‡¥ï‡¥æ‡µª ‡¥´‡µÄ‡¥ö‡µç‡¥ö‡µº ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ö‡µç‡¥ö‡µç ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥Ö‡¥™‡µç‚Äå‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡¥æ‡µΩ AI ‡¥µ‡¥ø‡¥∂‡¥ï‡¥≤‡¥®‡¥Ç ‡¥®‡µΩ‡¥ï‡¥æ‡¥Ç. ‡¥Ö‡¥≤‡µç‡¥≤‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ ‡¥∞‡µã‡¥ó‡¥§‡µç‡¥§‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥µ‡¥ø‡¥µ‡¥∞‡¥£‡¥Ç ‡¥™‡¥±‡¥Ø‡µÇ.`;
  }

  // Fertilizer queries
  if (input.includes('‡¥µ‡¥≥') || input.includes('‡¥µ‡¥≥‡¥Ç')) {
    return `‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ${farmer.mainCrops[0]} ‡¥µ‡¥ø‡¥≥‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µç ‡¥á‡¥™‡µç‡¥™‡µã‡µæ NPK 19:19:19 @ 25 ‡¥ï‡¥ø.‡¥ó‡µç‡¥∞‡¥æ‡¥Ç/‡¥è‡¥ï‡µç‡¥ï‡µº ‡¥™‡µç‡¥∞‡¥Ø‡µã‡¥ó‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥Ç. ‡¥Æ‡¥¥‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µç ‡¥Æ‡µÅ‡¥Æ‡µç‡¥™‡µç ‡¥™‡µç‡¥∞‡¥Ø‡µã‡¥ó‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡¥§‡µç ‡¥®‡¥≤‡µç‡¥≤‡¥§‡¥æ‡¥£‡µç.`;
  }

  // Scheme queries
  if (input.includes('‡¥∏‡µç‡¥ï‡µÄ‡¥Ç') || input.includes('‡¥∏‡¥¨‡µç‡¥∏‡¥ø‡¥°‡¥ø') || input.includes('‡¥∏‡¥π‡¥æ‡¥Ø‡¥Ç')) {
    return `${farmer.name_ml} ‡¥∏‡¥æ‡µº, ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥™‡µç‡¥™‡µÜ‡¥ü‡¥æ‡¥µ‡µÅ‡¥®‡µç‡¥® ‡¥∏‡µç‡¥ï‡µÄ‡¥Æ‡µÅ‡¥ï‡µæ: 1) ‡¥ï‡¥ø‡¥∏‡¥æ‡µª ‡¥∏‡¥Æ‡µç‡¥Æ‡¥æ‡µª ‡¥®‡¥ø‡¥ß‡¥ø - ‚Çπ6000/‡¥µ‡µº‡¥∑‡¥Ç 2) ‡¥ï‡µç‡¥∞‡µã‡¥™‡µç‡¥™‡µç ‡¥á‡µª‡¥∑‡µÅ‡¥±‡µª‡¥∏‡µç 3) ‡¥ï‡µá‡¥∞‡¥≥ ‡¥ï‡¥æ‡µº‡¥∑‡¥ø‡¥ï ‡¥¨‡µã‡¥£‡¥∏‡µç. '‡¥∏‡µç‡¥ï‡µÄ‡¥Æ‡µÅ‡¥ï‡µæ' ‡¥ü‡¥æ‡¥¨‡¥ø‡µΩ ‡¥ï‡µÇ‡¥ü‡µÅ‡¥§‡µΩ ‡¥µ‡¥ø‡¥µ‡¥∞‡¥ô‡µç‡¥ô‡µæ ‡¥ï‡¥æ‡¥£‡µÇ.`;
  }

  // General farming advice
  if (input.includes('‡¥é‡¥®‡µç‡¥§‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥£‡¥Ç') || input.includes('‡¥ú‡µã‡¥≤‡¥ø')) {
    return `‡¥á‡¥®‡µç‡¥®‡¥§‡µç‡¥§‡µÜ ‡¥∂‡µÅ‡¥™‡¥æ‡µº‡¥∂‡¥ï‡µæ: 1) ‡¥™‡µÅ‡¥≤‡µº‡¥ö‡µç‡¥ö‡µÜ ‡¥µ‡¥Ø‡µΩ ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï 2) ‡¥µ‡µà‡¥ï‡µÄ‡¥ü‡µç‡¥ü‡µç ‡¥ú‡¥≤‡¥∏‡µá‡¥ö‡¥®‡¥Ç 3) ‡¥ï‡µÄ‡¥ü‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡¥æ‡¥Ø‡¥ø ‡¥®‡¥ø‡¥∞‡µÄ‡¥ï‡µç‡¥∑‡¥£‡¥Ç 4) ‡¥®‡¥æ‡¥≥‡µÜ ‡¥Æ‡¥¥ ‡¥µ‡¥∞‡µÅ‡¥Æ‡µÜ‡¥®‡µç‡¥®‡¥§‡¥ø‡¥®‡¥æ‡µΩ ‡¥µ‡¥ø‡¥≥‡¥µ‡µÜ‡¥ü‡µÅ‡¥™‡µç‡¥™‡µç ‡¥Æ‡¥æ‡¥±‡µç‡¥±‡¥ø‡¥µ‡µÜ‡¥ï‡µç‡¥ï‡µÅ‡¥ï.`;
  }

  // Greetings
  if (input.includes('‡¥®‡¥Æ‡¥∏‡µç‡¥ï‡¥æ‡¥∞‡¥Ç') || input.includes('‡¥π‡¥≤‡µã') || input.includes('‡¥ï‡µÅ‡¥∂‡¥≤‡¥Ç')) {
    const hour = new Date().getHours();
    const greeting = hour < 12 ? '‡¥∏‡µÅ‡¥™‡µç‡¥∞‡¥≠‡¥æ‡¥§‡¥Ç' : hour < 17 ? '‡¥®‡¥Æ‡¥∏‡µç‡¥ï‡¥æ‡¥∞‡¥Ç' : '‡¥∏‡µÅ‡¥∏‡¥®‡µç‡¥ß‡µç‡¥Ø';
    return `${greeting} ${farmer.name_ml} ‡¥∏‡¥æ‡µº! ‡¥é‡¥®‡¥ø‡¥ï‡µç‡¥ï‡µç ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÜ ‡¥é‡¥ô‡µç‡¥ô‡¥®‡µÜ ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥ï‡¥¥‡¥ø‡¥Ø‡µÅ‡¥Ç? ‡¥ï‡¥æ‡¥≤‡¥æ‡¥µ‡¥∏‡µç‡¥•, ‡¥µ‡¥ø‡¥≥ ‡¥µ‡¥ø‡¥≤, ‡¥ï‡µÉ‡¥∑‡¥ø ‡¥ü‡¥ø‡¥™‡µç‡¥∏‡µç - ‡¥é‡¥®‡µç‡¥§‡µÅ ‡¥µ‡µá‡¥£‡¥Æ‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡¥≤‡µÅ‡¥Ç ‡¥ö‡µã‡¥¶‡¥ø‡¥ï‡µç‡¥ï‡µÇ.`;
  }

  // Default response
  return `${farmer.name_ml} ‡¥∏‡¥æ‡µº, ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥Ç ‡¥Æ‡¥®‡¥∏‡µç‡¥∏‡¥ø‡¥≤‡¥æ‡¥Ø‡¥ø‡¥≤‡µç‡¥≤. ‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥á‡¥ô‡µç‡¥ô‡¥®‡µÜ ‡¥ö‡µã‡¥¶‡¥ø‡¥ï‡µç‡¥ï‡µÇ: "‡¥®‡¥æ‡¥≥‡µÜ ‡¥Æ‡¥¥ ‡¥â‡¥£‡µç‡¥ü‡µã?", "‡¥®‡µÜ‡µΩ ‡¥µ‡¥ø‡¥≤ ‡¥é‡¥®‡µç‡¥§‡¥æ‡¥£‡µç?", "‡¥ú‡¥≤‡¥∏‡µá‡¥ö‡¥®‡¥Ç ‡¥é‡¥™‡µç‡¥™‡µã‡µæ ‡¥µ‡µá‡¥£‡¥Ç?" ‡¥é‡¥®‡µç‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥®‡µÜ. ‡¥û‡¥æ‡µª ‡¥ï‡µÇ‡¥ü‡µÅ‡¥§‡µΩ ‡¥™‡¥†‡¥ø‡¥ö‡µç‡¥ö‡µÅ ‡¥Æ‡µÜ‡¥ö‡µç‡¥ö‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§‡¥æ‡¥Ç! üåæ`;
};

// Voice input processing helper
export const processVoiceInput = (text: string): string => {
  // Simple text cleaning for Malayalam voice input
  return text
    .trim()
    .replace(/\s+/g, ' ')  // Replace multiple spaces with single space
    .toLowerCase();
};

export default {
  getChatResponse,
  processVoiceInput
};